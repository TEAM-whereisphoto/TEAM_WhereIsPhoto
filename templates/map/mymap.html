{% extends 'base.html' %}
{% load static %}

<!-- 이걸 여기에 넣어놔야 내가 한 프론트들이랑 규리가 한거랑 안겹칠 것 같은데-->
<!-- 클래스명들을 너무 흔하게 해놔서.. -->
{% block head %}
<link rel="stylesheet" href="{% static 'css/map/style.css' %}">
<script defer src="{% static 'js/map/map.js' %}"></script>
{% endblock %}

{% block content %}
<!-- kakao api 사용을 위해 -->
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=59e596b509c521df7eafd1be72b54054&libraries=services,clusterer,drawing"></script>

<br />
<div class="container">

    <div class="row" id="filter-container">
        <!-- 검색란 & 필터 부분 넣는 공간 -->
        {% comment %}
        <form method="GET" action="{% url 'map:search' %}">
            <div id="search" class="pb-3">
                <input class="w-50" name="search" type="text" placeholder="매장 이름 or 지역을 검색해보세요 ex) 홍대">
                <button class="btn btn-primary" type="submit">검색</button>
            <!-- </div> -->
        </form>
        {% endcomment %}
        <div id="searchLoc" class="pb-3">
            <input id="searchInput" class="w-25 px-2" name="search" type="text" placeholder="어디 지역을 찾아볼까요?">
            <button id="searchBtn" class="btn btn-primary" type="submit">검색</button>
        </div>
        <br />

        </div>


<!-- 리스트 & 지도 -->
    <div class="row py-3">
        
        <div id="list-container" class="col-4">
            
            <!-- 정렬 선택 -->
            <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                <input type="radio" class="btn-check" name="btnradio" id="sortDist" autocomplete="off">
                <label class="btn btn-outline-primary" for="sortDist">거리순</label>

                <input type="radio" class="btn-check" name="btnradio" id="sortAlpha" autocomplete="off">
                <label class="btn btn-outline-primary" for="sortAlpha">가나다순</label>
              
                <input type="radio" class="btn-check" name="btnradio" id="sortAlphaDesc" autocomplete="off">
                <label class="btn btn-outline-primary" for="sortAlphaDesc">가나다순(거꾸로)</label>
            </div>

            <!-- 브랜드 필터 -->
            <div class="btn-group my-4" role="group" aria-label="Basic checkbox toggle button group" id="filterGroup">
                <input type="checkbox" class="btn-check" id="filter-lifefour" autocomplete="off" checked>
                <label class="btn btn-outline-primary" for="filter-lifefour">인생네컷</label>
              
                <input type="checkbox" class="btn-check" id="filter-photoism" autocomplete="off" checked>
                <label class="btn btn-outline-primary" for="filter-photoism">포토이즘박스</label>
              
                <input type="checkbox" class="btn-check" id="filter-signature" autocomplete="off" checked>
                <label class="btn btn-outline-primary" for="filter-signature">포토시그니처</label>

                <input type="checkbox" class="btn-check" id="filter-selfix" autocomplete="off" checked>
                <label class="btn btn-outline-primary" for="filter-selfix">셀픽스</label>

                <input type="checkbox" class="btn-check" id="filter-haru" autocomplete="off" checked>
                <label class="btn btn-outline-primary" for="filter-haru">하루필름</label>
                
            </div>



            <!-- 매장 리스트 -->
            <div class="accordion" id="accordionList" style="height: 500px; overflow: auto;">
{% comment %}
                {% for booth in booths %}

                <div class="accordion-item">
                    <h2 class="accordion-header" id="heading-{{ forloop.counter0 }}">
                        <button id="accordion-name" data-name="{{ booth.name }}" class="accordion-button collapsed fs-5" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-{{ forloop.counter0 }}" aria-expanded="true" aria-controls="collapse-{{ forloop.counter0 }}">
                            <svg class="me-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32">
                                <path fill="none" d="M0 0h24v24H0z"/>
                                <path d="M18.364 17.364L12 23.728l-6.364-6.364a9 9 0 1 1 12.728 0zM12 13a2 2 0 1 0 0-4 2 2 0 0 0 0 4z" fill="rgba(31,82,255,1)"/>
                            </svg>{{ booth.name }}

                            <button class="btn btn-gray btn-sm ms-5 mb-3">{{ booth.brand }}</button>
                        </button>
                    </h2>

                    <div id="collapse-{{ forloop.counter0 }}" class="accordion-collapse collapse" aria-labelledby="heading-{{ forloop.counter0 }}" data-bs-parent="#accordionList">
                        <div class="accordion-body">
                            <div id="mapdetail-{{ forloop.counter0 }}" class="ps-4">
                                
                                <p style="margin: 0; color: #8B8B8B; font-size: 0.75rem;">
                                    부스 {{ booth.boxnum }}개 | {% if booth.street == 0%}매장점{% else %}부스점{% endif %} | 소품{% if booth.deco == 0%} X {% else %} ○ {% endif %}
                                </p>
                                
                                <p style="margin: 16px 0 0 0">{{ booth.location }}</p>

                                <p style="margin: 16px 0 0 0"></p>
                                {% if booth.operationHour == 'nan' %}
                                {% else %}
                                {{ booth.operationHour }}
                                {% endif %}
                                </p>

                                <button class="btn btn-outline-ratingNlike container" style="width: 75%;">
                                    <div class="row">

                                        <div class = "col" style="color: #FFD107;">★ {{ booth.rating }}</div>
                                        | 
                                        <div class = "col" style="color: #484848"> {{ booth.likenum}} users </div>
                                    </div>
                                </button>

                                <a style="display: block;" class="mt-3" href="{% url 'map:booth_detail' pk=booth.pk %}">디테일페이지</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                {% endfor %}
{% endcomment %}
            </div>
        </div>
        
        <!-- 지도 -->
        <div id="map-container"  class="col-8">
            <div id="map" style="width:800px; height: 600px;"></div>
            <!-- <p id="result"></p> -->
        </div>
        
    </div>
</div>
    
{% endblock %}