{% extends 'base.html' %}
{% block content %}

<div>
    <div>
        {% if article.image %}
        <p>
            <img src ="{{ booth.image.url }}">
        </p>>
        {% endif %}
        <h3>{{ booth.name }}</h3>
        <h6>{{ booth.loaction }}</h6>
        <div class="heart" onclick="onClickLike({{pk}} )" >ğŸ¤</div>
        <br>
    </div>

    <div>
        <h4>Customer reviews</h4>
        <h6>{{booth.rating}}</h6>
        <h6>{{booth.review_number}} Reviews</h6>
        <a href="{% url 'map:booth_review_list' booth.id %}">view all reviews</a>
        <a href="{% url 'map:booth_review_create' booth.id %}">ë¦¬ë·° ì‘ì„± </a>

        <br>
    </div>


    <div>
        <br>
        <h4>Lost and Found</h4>
        {% for lnf in lnfs %}
            {% if lnf.tag == 'ë¶„ì‹¤' %}
            <h6>ë¶„ì‹¤</h6>
            {{lnf.title}}

            {% elif lnf.tag == 'ë³´ê´€' %}
            <h6>ë³´ê´€</h6>
            {{lnf.title}}

            {% else %}
            <h6>ê¸°íƒ€</h6>
            {{lnf.title}}

            {% endif %}
        {% endfor %}
        <br>

        <a href="{% url 'LnF:list' %}">more</a> <!--ë¶„ì‹¤ë¬¼ ë¦¬ìŠ¤íŠ¸ -->
        <a href="{% url 'LnF:new' %}">Write</a> <!-- ë¶„ì‹¤ë¬¼ ì‘ì„± ì—°ê²° -->
        <br>
    </div>

    <div>
        <br>
        <h4>ë¸Œëœë“œ ì •ë³´</h4>
        ì´ë¦„: {{ brand_list.0.0 }} <br>
        ì¬ì´¬ì˜: {{ brand_list.0.1 }} <br>
        ë¦¬ëª¨ì»¨: {{ brand_list.0.2 }} <br>
        ì´¬ì˜ì‹œê°„: {{ brand_list.0.3 }}<br>
        ê°€ê²©ì •ë³´<br>
        {% for frame in brand.4 %}
        ê°€ê²©: {{frame.0}}
        í”„ë ˆì„ ì»· ìˆ˜: {{frame.1}}
        ì´ ì´¬ì˜ ìˆ˜: {{frame.2}}
        <br>
        {% endfor %}
        <br>
    </div>
</div>


<script>
    const requestLike = new XMLHttpRequest();

    const onClickLike = (id) => {
        const url = '/like_ajax/';
        requestLike.open("POST", url, true);
        requestLike.setRequestHeader(
            "Content-Type",
            "application/x-ww-form-urlencoded"
        );
        requestLike.send(JSON.stringify({id: id}))
    }

    const likeHandleResponse = () => {
        if(requestLike.status < 400){
            const {id, k, status} = JSON.parse(requestLike.response);
            const element = document.querySelector(`.booth-id-${id} .heart`);
            if(k==0)
                element.innerHTML = 'â¤ï¸'
            else
                element.innerHTML = 'ğŸ¤'
        }
    }

    requestLike.onreadystatechange = () => {
        if(requestLike.readyState === XMLHttpRequest.DONE){
            likeHandleResponse();
        }
    }
</script>



{% endblock %}

