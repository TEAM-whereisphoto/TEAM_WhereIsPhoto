{% extends 'base.html' %}
{% block content %}

<div>
    <div>
        {% if article.image %}
        <p>
            <img src ="{{ booth.image.url }}">
        </p>>
        {% endif %}
        <h3>{{ booth.name }}</h3>
        <h6>{{ booth.loaction }}</h6>
        <div class="heart" onclick="onClickLike({{pk}} )" >ğŸ¤</div>
        <br>
    </div>

    <div>
        <h4>Customer reviews</h4>
        <h6>{{booth.rating}}</h6>
        <h6>{{booth.review_number}} Reviews</h6>
        <a href="{% url 'map:booth_review_list' booth.id %}">view all reviews</a>
        <a href="{% url 'map:booth_review_create' booth.id %}">ë¦¬ë·° ì‘ì„± </a>


        <br>
    </div>

    <div>
        <br>
        <h4>ë¶€ìŠ¤ ë””í…Œì¼ </h4>

        {% if booth.iron == 1%}
        <h6> ê³ ë°ê¸° : ìˆìŒ </h6>
        {% else %}
        <h6> ê³ ë°ê¸° : ì—†ìŒ </h6>
        {% endif %}

        {% if booth.street == 1%}
        <h6> ë§¤ì¥ì   </h6>
        {% else %}
        <h6> ë¶€ìŠ¤ì  </h6>
        {% endif %}

        {% if booth.deco == 'GLASS'%}
        <h6> ì†Œí’ˆ : ì•ˆê²½</h6>
        {% elif booth.deco == 'BAND' %}
        <h6> ì†Œí’ˆ : ë¨¸ë¦¬ë  </h6>
        {% else %}
        <h6> ì†Œí’ˆ : ëª¨ì </h6>
        {% endif %}

        <h6> ë¶€ìŠ¤ ê°œìˆ˜ : {{booth.boxnum}} </h6>


    </div>


    <div>
        <br>
        <h4>Lost and Found</h4>
        {% for lnf in lnfs %}
            {% if lnf.tag == 'ë¶„ì‹¤' %}
            <h6>ë¶„ì‹¤</h6>
            {{lnf.title}}

            {% elif lnf.tag == 'ë³´ê´€' %}
            <h6>ë³´ê´€</h6>
            {{lnf.title}}

            {% else %}
            <h6>ê¸°íƒ€</h6>
            {{lnf.title}}

            {% endif %}
        {% endfor %}
        <br>

        <a href="{% url 'LnF:list' %}">more</a> <!--ë¶„ì‹¤ë¬¼ ë¦¬ìŠ¤íŠ¸ -->
        <a href="{% url 'LnF:new' %}">Write</a> <!-- ë¶„ì‹¤ë¬¼ ì‘ì„± ì—°ê²° -->
        <br>
    </div>
    <div>
        <br>
        <h4>ì°¸ê³ ì‚¬í•­</h4>
        {% for review in reviews %}
        {% if review.new == True %}

        <h6> ê³ ë°ê¸° :
        {% if review.iron == 'YES' %} ìˆìŒ
        {% else %} ì—†ìŒ
        {% endif %}

        / ë¶€ìŠ¤ íƒ€ì… :
        {% if review.street == 'STORE' %} ë§¤ì¥ì 
        {% else %} ë¶€ìŠ¤ì 
        {% endif %}
        / Feature :
        {% if review.deco == 'GLASS' %} ì•ˆê²½
        {% elif review.deco == 'BAND' %} ë¨¸ë¦¬ë 
        {% else %} ëª¨ì
        {% endif %}
        / ë¶€ìŠ¤ ê°œìˆ˜ :
        {% if review.boxnum == 'one' %} 1ê°œ
        {% elif review.boxnum == 'two' %} 2ê°œ
        {% elif review.boxnum == 'three'%} 3ê°œ
        {% elif review.boxnum == 'four'%} 4ê°œ
        {% else %} 5ê°œ ì´ìƒ
        {% endif %}
        </h6>

        {% endif %}
        {% endfor %}
    </div>

    <div>
        <br>
        <h4>ë¸Œëœë“œ ì •ë³´</h4>
        ì´ë¦„: {{ brand_list.0.0 }} <br>
        ì¬ì´¬ì˜: {{ brand_list.0.1 }} <br>
        ë¦¬ëª¨ì»¨: {{ brand_list.0.2 }} <br>
        ì´¬ì˜ì‹œê°„: {{ brand_list.0.3 }}<br>
        ê°€ê²©ì •ë³´<br>
        {% for frame in brand.4 %}
        ê°€ê²©: {{frame.0}}
        í”„ë ˆì„ ì»· ìˆ˜: {{frame.1}}
        ì´ ì´¬ì˜ ìˆ˜: {{frame.2}}
        <br>
        {% endfor %}
        <br>
    </div>
</div>


<script>
    const requestLike = new XMLHttpRequest();

    const onClickLike = (id) => {
        const url = '/like_ajax/';
        requestLike.open("POST", url, true);
        requestLike.setRequestHeader(
            "Content-Type",
            "application/x-ww-form-urlencoded"
        );
        requestLike.send(JSON.stringify({id: id}))
    }

    const likeHandleResponse = () => {
        if(requestLike.status < 400){
            const {id, k, status} = JSON.parse(requestLike.response);
            const element = document.querySelector(`.booth-id-${id} .heart`);
            if(k==0)
                element.innerHTML = 'â¤ï¸'
            else
                element.innerHTML = 'ğŸ¤'
        }
    }

    requestLike.onreadystatechange = () => {
        if(requestLike.readyState === XMLHttpRequest.DONE){
            likeHandleResponse();
        }
    }
</script>



{% endblock %}

