{% extends 'base.html' %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'css/user/my_review.css' %}">
    <script defer src="{% static 'js/map/imgmodal.js' %}"></script>
{% endblock %}


{% block content %}
<section class = "my_review">
    <p class="sub__title">My review</p>
    {% if my_review_exist == 0 %}
        <div class="no__post">ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.</div>
    {% else %}
        {% for review in reviews_posts %}
        <div class = "review">


        <div class="reviewblock">
            <a href = "{% url 'map:booth_detail' review.boothid %}">
        <div class="head">
        <div class ='title'>
                {{review.booth}}

            </div>
            <div class="container-drop">
                    <div class="dropdown">
                  <a class="btn btn-sm btn-outline-none dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">â‹®</a>
                  <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                      {% if review.user == request.user %}
                    <li><a class="dropdown-item" href="{% url 'map:review_update' review.id %}">ìˆ˜ì •</a></li>
                    <li><a class="dropdown-item" onclick="post_del({{post.id}})">ì‚­ì œ</a></li>
                      {% endif %}
                  </ul>
                </div>
                </div>
        </div>
            <div class="container">

                {% if review.img %}
                <div class="content col-7">
                    <div class="text">
                                    {{review.content}}
                    </div>
                    <div class="color">
                                        <div class ="colortext" style="width:40px">ë°°ê²½ìƒ‰ : </div>
                                        {% for color in review.color %}

                                        {% if color == 'í•‘í¬'%}<div><button type="button" class="colorbtn colorpink">â– </button></div>
                                        {% elif color == 'í•˜ëŠ˜'%}<div><button type="button" class="colorbtn colorskyblue">â– </button></div>
                                        {% elif color == 'ë…¸ë‘'%}<div><button type="button" class="colorbtn coloryellow">â– </button></div>
                                        {% elif color == 'íšŒìƒ‰'%}<div><button type="button" class="colorbtn colorgray">â– </button></div>
                                        {% elif color == 'ë‚¨ìƒ‰'%}<div><button type="button" class="colorbtn colorindigo">â– </button></div>
                                        {% elif color == 'ì—°ë‘'%}<div><button type="button" class="colorbtn colorgreen">â– </button></div>
                                        {% elif color == 'ë³´ë¼'%}<div><button type="button" class="colorbtn colorpurple">â– </button></div>
                                        {% elif color == 'ë¹¨ê°•'%}<div><button type="button" class="colorbtn colorred">â– </button></div>
                                        {% elif color == 'ì£¼í™©'%}<div><button type="button" class="colorbtn colororange">â– </button></div>
                                        {% elif color == 'ê¸°íƒ€'%}<div><button type="button" class="colorbtn colorrainbow">â– </button></div>
                                        {% endif %}
                                        {% endfor %}
                                </div>
                </div>

                <div class="imgcontent col-5">
                    <img src="{{ review.img.url }}" class="img" width="100%">
                    <div class="modal">
                      <span class="close"></span>
                      <img src= "{{ review.img.url }}" class="modal-content">
                    </div>
                </div>
                {% else %}
                <div>
                    <div class="text">
                                {{review.content}}
                            </div>
                    <div class="color">
                                    <div class ="colortext" style ="width: 40px">ë°°ê²½ìƒ‰ : </div>
                                    {% for color in review.color %}

                                    {% if color == 'í•‘í¬'%}<div><button type="button" class="colorbtn colorpink">â– </button></div>
                                    {% elif color == 'í•˜ëŠ˜'%}<div><button type="button" class="colorbtn colorskyblue">â– </button></div>
                                    {% elif color == 'ë…¸ë‘'%}<div><button type="button" class="colorbtn coloryellow">â– </button></div>
                                    {% elif color == 'íšŒìƒ‰'%}<div><button type="button" class="colorbtn colorgray">â– </button></div>
                                    {% elif color == 'ë‚¨ìƒ‰'%}<div><button type="button" class="colorbtn colorindigo">â– </button></div>
                                    {% elif color == 'ì—°ë‘'%}<div><button type="button" class="colorbtn colorgreen">â– </button></div>
                                    {% elif color == 'ë³´ë¼'%}<div><button type="button" class="colorbtn colorpurple">â– </button></div>
                                    {% elif color == 'ë¹¨ê°•'%}<div><button type="button" class="colorbtn colorred">â– </button></div>
                                    {% elif color == 'ì£¼í™©'%}<div><button type="button" class="colorbtn colororange">â– </button></div>
                                    {% elif color == 'ê¸°íƒ€'%}<div><button type="button" class="colorbtn colorrainbow">â– </button></div>
                                    {% endif %}
                                    {% endfor %}
                            </div>
                </div>
                {% endif %}
            </div>

            <div class="container_review">
                    <div class="star-rating">
                        <div class="star-rating-fill" style= "width: {{review.getWidth}}%;">
                            <span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜…</span>
                        </div>
                        <div class="star-rating-base">
                            <span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜…</span>
                        </div>
                    </div>
            </div>
            <div class = "tag">
                        {% for tag in review.tag %}
                        {% if tag == 'ì‹œì„¤ì´ ê¹¨ë—í•´ìš”'%}<div class="tagbtn">âœ¨ ì‹œì„¤ì´ ê¹¨ë—í•´ìš”</div>
                        {% elif tag == 'ì†Œí’ˆì´ ë‹¤ì–‘í•´ìš”'%}<div class="tagbtn">ğŸ‰  ì†Œí’ˆì´ ë‹¤ì–‘í•´ìš”</div>
                        {% elif tag == 'ë¶€ìŠ¤ê°€ ë§ì•„ìš”'%}<div  class="tagbtn">ğŸ“¸ ë¶€ìŠ¤ê°€ ë§ì•„ìš”</div>
                        {% elif tag == 'ê³ ë°ê¸°ê°€ ìˆì–´ìš”'%}<div class="tagbtn">ğŸ’‡ğŸ»â€ ê³ ë°ê¸°ê°€ ìˆì–´ìš”</div>
                        {% elif tag == 'ë¡œë“œì ì´ì—ìš”'%}<div class="tagbtn">ğŸ›£ï¸ ë¡œë“œì ì´ì—ìš”</div>
                        {% endif %}
                        {% endfor %}
            </div>
            <div class="time">
            <div class="foot">
                        {{review.user}} | {{review.time|date:'mì›” dì¼'}}
                </div>
            </div>
        </div>
    <script>
        const post_del = (id) => {
        var res = confirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');
        if (res){
            window.location.href = "{% url 'map:review_delete' review.id %}"
            alert('ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.')
        }
    }
    </script>
            </a>
        </div>

        {% endfor %}
</div>

    {% endif %}
</section>
{% endblock %}